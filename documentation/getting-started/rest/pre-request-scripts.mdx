---
sidebarTitle: Pre-request scripts
title: Pre-request scripts
description: Learn how to use pre-request scripts in API Lab.
---

## Scripts

API Lab lets you add dynamic behavior to REST API requests. This allows you to write test suites and build requests that can contain dynamic parameters. You can add [ECMAScript](https://tc39.es/ecma262) code that executes based on events in the flow:

- Pre-request scripts are executed before a request is sent to the server.
- You can add multiple pre-request scripts to a request.
- You can add pre-request scripts to both requests saved and not saved in a collection.

<Tip>API Lab will then execute the scripts along with the requests in the specified order.</Tip>

## Pre-request script

Pre-request script is a piece of code that will run before the execution of the request.

You can use the pre-request script for a pre-processing task such as:

- Setting parameters, headers.
- Adding body data.
- Adding variable values.
- Including timestamps in request headers.
- Support random values.

<Tip> 
  API Lab supports **Visual Mode** for creating pre-request scripts for better user experience without the need to write code.
</Tip>

## Writing pre-request scripts

API Lab provides a special `pm` object containing various methods to create scripts and tests. The `pm` object is global and can be referenced by name to access methods.

For example, to set an environment variable, you can use the `pm.environment.set()` method.



<Tabs>
<Tab title="JavaScript">

```javascript
pm.environment.set("variable", "value");
```

</Tab>
<Tab title = "Visual Mode">
<Frame>
    <img src="/images/apilab/pre-script-light.png" /> 
</Frame>
</Tab>
</Tabs>

## Examples

Let us look at some examples of how you can use API Lab to write pre-request scripts.

### Setting environment variables

`pm.environment.set()` can be used directly for quick and convenient environment variable definition. It can be used to better organize request codes.

<Tabs>
<Tab title="JavaScript">
```javascript
pm.environment.set("baseURL", "https://httpbin.org");
pm.environment.set("method", "get");
```

</Tab>
<Tab title="Visual Mode">
<Frame>
    <img src="/images/apilab/pre-script-light-2.png" /> 
</Frame>
</Tab>
</Tabs>
Goto the pre-request script tab and copy-paste the above [ECMAScript](https://tc39.es/ecma262) code as shown below:

These variables can be accessed in the request section by referencing them in double angle brackets `{{$randomString}}`. So the URL will be `{{baseURL}}/{{method}}`.

### Generating random Values to test API

Let us take a case where we need to test random test-user data available at an endpoint.

Let us use the following GET API endpoint `https://reqres.in/api/users/`.

Add `{{$randomString}}` to the endpoint URL.

```
https://reqres.in/api/users/{{$randomString}}
```

Now in the pre-request script tab add the following logic.

```javascript
var random = Math.floor(Math.random() * 10);
pm.environment.set("randomString", random.toString());
```

The [ECMAScript](https://tc39.es/ecma262) code will assign a random number to the environment variable `randomValue` and the API will return a random user associated with the random value.

You will get a similar response as shown below:

```json
{
  "data": {
    "id": 4,
    "email": "eve.holt@reqres.in",
    "first_name": "Eve",
    "last_name": "Holt",
    "avatar": "https://reqres.in/img/faces/4-image.jpg"
  },
  "support": {
    "url": "https://reqres.in/#support-heading",
    "text": "To keep ReqRes free, contributions towards server costs are appreciated!"
  }
}
```

### Adding variable from Environment to test API

Let us take a case where we need to test the API with a variable from the environment.

Let us use the following GET API endpoint `https://httpbin.org/get`.

Add `{{$baseURL}}` to the endpoint URL.

```
https://httpbin.org/get/{{$baseURL}}
```

<Tabs>
<Tab title="JavaScript">
```javascript
pm.environment.set("baseURL", "https://httpbin.org");
pm.environment.set("method", "get");
```

</Tab>
<Tab title="Visual Mode">
<Frame>
    <img src="/images/apilab/pre-script-env.gif" /> 
</Frame>
</Tab>
</Tabs>


